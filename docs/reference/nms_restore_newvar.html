<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Restore the names of a dataframe to which a new variable has been added. — nms_restore_newvar • fgeo.tool</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Restore the names of a dataframe to which a new variable has been added. — nms_restore_newvar" />

<meta property="og:description" content="This function helps to develop functions that work with both ViewFullTables
and census tables. ViewFullTables and census tables share multiple names but
often the case of those names is different (e.g. Tag and tag). When
developing functions that work with both ViewFullTables and fgeo tables, one
solution is to lowercase all names, do whatever the function needs to do, and
then restore the old names. This function helps by restoring old names, which
is not straight forward when the function adds a new variable and may contain
a preexisting variable with the same name of the added variable." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fgeo.tool</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maurolepore">
    <span class="fa fa-gavel"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/forestgeo/fgeo.tool">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forestgeo.github.io/fgeo/">fgeo</a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Restore the names of a dataframe to which a new variable has been added.</h1>
    <small class="dont-index">Source: <a href='https://github.com/forestgeo/fgeo.tool/blob/master/R/nms_manipulate_names.R'><code>R/nms_manipulate_names.R</code></a></small>
    <div class="hidden name"><code>nms_restore_newvar.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function helps to develop functions that work with both ViewFullTables
and census tables. ViewFullTables and census tables share multiple names but
often the case of those names is different (e.g. <code>Tag</code> and <code>tag</code>). When
developing functions that work with both ViewFullTables and fgeo tables, one
solution is to lowercase all names, do whatever the function needs to do, and
then restore the old names. This function helps by restoring old names, which
is not straight forward when the function adds a new variable and may contain
a preexisting variable with the same name of the added variable.</p>
    
    </div>

    <pre class="usage"><span class='fu'>nms_restore_newvar</span>(<span class='no'>x</span>, <span class='no'>new_var</span>, <span class='no'>old_nms</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A dataframe.</p></td>
    </tr>
    <tr>
      <th>new_var</th>
      <td><p>The name of a single new variable added to <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>old_nms</th>
      <td><p>A vector containing the old names of <code>x</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns the input with the names changed accordingly.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The length of <code>x</code> must equal the number of names in old_nms, or that + 1".</p>
<p><code>nms_restore_newvar()</code> is similar to <code><a href='nms_lowercase.html'>nms_restore()</a></code> but specifically
targets dataframes that have been mutated with <code><a href='http://dplyr.tidyverse.org/reference/mutate.html'>dplyr::mutate()</a></code>.
<code><a href='http://dplyr.tidyverse.org/reference/mutate.html'>dplyr::mutate()</a></code> drops attributes
(https://github.com/tidyverse/dplyr/issues/1984), which makes it
<code><a href='nms_lowercase.html'>nms_restore()</a></code> useless. attributes.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other functions dealing with names: <code><a href='nms_extract_anycase.html'>nms_extract_anycase</a></code>,
  <code><a href='nms_lowercase.html'>nms_lowercase</a></code>, <code><a href='nms_tidy.html'>nms_tidy</a></code>,
  <code><a href='nms_try_rename.html'>nms_try_rename</a></code>, <code><a href='nms.html'>nms</a></code></p>
<p>Other functions for developers: <code><a href='check_crucial_names.html'>check_crucial_names</a></code>,
  <code><a href='extract_insensitive.html'>extract_insensitive</a></code>,
  <code><a href='is_multiple.html'>is_multiple</a></code>,
  <code><a href='nms_extract_anycase.html'>nms_extract_anycase</a></code>,
  <code><a href='nms_lowercase.html'>nms_lowercase</a></code>, <code><a href='nms_tidy.html'>nms_tidy</a></code>,
  <code><a href='nms_try_rename.html'>nms_try_rename</a></code>, <code><a href='nms.html'>nms</a></code>,
  <code><a href='rename_matches.html'>rename_matches</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Data does not contain the variable that will be added</span>
<span class='no'>dfm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>Y</span> <span class='kw'>=</span> <span class='st'>"a"</span>)
(<span class='no'>old</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>dfm</span>))</div><div class='output co'>#&gt; [1] "X" "Y"</div><div class='input'><span class='co'># Lower names</span>
(<span class='no'>dfm</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>rlang</span><span class='kw ns'>::</span><span class='fu'><a href='https://rlang.r-lib.org/reference/set_names.html'>set_names</a></span>(<span class='no'>dfm</span>, <span class='no'>tolower</span>))</div><div class='output co'>#&gt;   x y
#&gt; 1 1 a</div><div class='input'><span class='co'># Add a variable</span>
<span class='no'>mutated</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='no'>dfm</span>, <span class='kw'>newvar</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='fl'>1</span>)
<span class='co'># Restore</span>
<span class='fu'>nms_restore_newvar</span>(<span class='no'>mutated</span>, <span class='st'>"newvar"</span>, <span class='no'>old</span>)</div><div class='output co'>#&gt;   X Y newvar
#&gt; 1 1 a      2</div><div class='input'>
<span class='co'># Data contains the variable that will be added</span>
<span class='no'>dfm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>X</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>Y</span> <span class='kw'>=</span> <span class='st'>"a"</span>, <span class='kw'>newvar</span> <span class='kw'>=</span> <span class='st'>"2"</span>)
(<span class='no'>old</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>dfm</span>))</div><div class='output co'>#&gt; [1] "X"      "Y"      "newvar"</div><div class='input'><span class='co'># Lower names</span>
(<span class='no'>dfm</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>rlang</span><span class='kw ns'>::</span><span class='fu'><a href='https://rlang.r-lib.org/reference/set_names.html'>set_names</a></span>(<span class='no'>dfm</span>, <span class='no'>tolower</span>))</div><div class='output co'>#&gt;   x y newvar
#&gt; 1 1 a      2</div><div class='input'><span class='co'># Add a variable</span>
<span class='no'>mutated</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='no'>dfm</span>, <span class='kw'>newvar</span> <span class='kw'>=</span> <span class='no'>x</span> + <span class='fl'>1</span>)
<span class='co'># Restore</span>
<span class='fu'>nms_restore_newvar</span>(<span class='no'>mutated</span>, <span class='st'>"newvar"</span>, <span class='no'>old</span>)</div><div class='output co'>#&gt;   X Y newvar
#&gt; 1 1 a      2</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/maurolepore'>Mauro Lepore</a>,  Richard  Condit, Suzanne Lao, <a href='http://www.forestgeo.si.edu/'>CTFS-ForestGEO</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

