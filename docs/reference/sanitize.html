<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sanitize ViewFullTable and ViewTaxonomy. — sanitize • fgeo.tool</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Sanitize ViewFullTable and ViewTaxonomy. — sanitize" />

<meta property="og:description" content="These functions sanitize dataframes from ViewFullTable and ViewTaxonomy to
achieve the same effect as reading with read_vft() and read_taxa(). The
most common problems that these functions fix are these:
Ensure that each column has the correct type.
Ensure that missing values are represented with NAs -- not with the
literal string &quot;NULL&quot;.
" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fgeo.tool</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/read_df_write.html">Read, combine, identify, and write multiple files</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maurolepore">
    <span class="fa fa-gavel"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/forestgeo/fgeo.tool">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forestgeo.github.io/fgeo/">fgeo</a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sanitize ViewFullTable and ViewTaxonomy.</h1>
    <small class="dont-index">Source: <a href='https://github.com/forestgeo/fgeo.tool/blob/master/R/sanitize.R'><code>R/sanitize.R</code></a></small>
    <div class="hidden name"><code>sanitize.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These functions sanitize dataframes from ViewFullTable and ViewTaxonomy to
achieve the same effect as reading with <code><a href='read_fgeo.html'>read_vft()</a></code> and <code><a href='read_fgeo.html'>read_taxa()</a></code>. The
most common problems that these functions fix are these:</p><ul>
<li><p>Ensure that each column has the correct type.</p></li>
<li><p>Ensure that missing values are represented with <code>NA</code>s -- not with the
literal string "NULL".</p></li>
</ul>
    
    </div>

    <pre class="usage"><span class='fu'>sanitize_vft</span>(<span class='no'>x</span>, <span class='kw'>col_types</span> <span class='kw'>=</span> <span class='fu'><a href='type_fgeo.html'>type_vft</a></span>(), <span class='kw'>na</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>""</span>, <span class='st'>"NA"</span>, <span class='st'>"NULL"</span>), <span class='no'>...</span>)

<span class='fu'>sanitize_taxa</span>(<span class='no'>x</span>, <span class='kw'>col_types</span> <span class='kw'>=</span> <span class='fu'><a href='type_fgeo.html'>type_taxa</a></span>(), <span class='kw'>na</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>""</span>, <span class='st'>"NA"</span>, <span class='st'>"NULL"</span>), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A dataframe; either a ForestGEO ViewFullTable (<code>sanitize_vft()</code>) or
ViewTaxonomy (<code>sanitize_vft()</code>).</p></td>
    </tr>
    <tr>
      <th>col_types</th>
      <td><p>One of <code>NULL</code>, a <code>cols()</code> specification, or
a string. See <code>vignette("column-types")</code> for more details.</p>
<p>If <code>NULL</code>, all column types will be imputed from the first 1000 rows
on the input. This is convenient (and fast), but not robust. If the
imputation fails, you'll need to supply the correct types yourself.</p>
<p>If a column specification created by <code>cols()</code>, it must contain
one column specification for each column. If you only want to read a
subset of the columns, use <code>cols_only()</code>.</p>
<p>Unlike other functions <code>type_convert()</code> does not allow character
specifications of <code>col_types</code>.</p></td>
    </tr>
    <tr>
      <th>na</th>
      <td><p>Character vector of strings to use for missing values. Set this
option to <code>character()</code> to indicate no missing values.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='http://www.rdocumentation.org/packages/readr/topics/type_convert'>readr::type_convert</a></code></p><dl class='dl-horizontal'>
  <dt>df</dt><dd><p>A data frame.</p></dd>
  <dt>col_types</dt><dd><p>One of <code>NULL</code>, a <code>cols()</code> specification, or
a string. See <code>vignette("column-types")</code> for more details.

If <code>NULL</code>, all column types will be imputed from the first 1000 rows
on the input. This is convenient (and fast), but not robust. If the
imputation fails, you'll need to supply the correct types yourself.

If a column specification created by <code>cols()</code>, it must contain
one column specification for each column. If you only want to read a
subset of the columns, use <code>cols_only()</code>.

Unlike other functions <code>type_convert()</code> does not allow character
specifications of <code>col_types</code>.</p></dd>
  <dt>na</dt><dd><p>Character vector of strings to use for missing values. Set this
option to <code>character()</code> to indicate no missing values.</p></dd>
  <dt>trim_ws</dt><dd><p>Should leading and trailing whitespace be trimmed from
each field before parsing it?</p></dd>
  <dt>locale</dt><dd><p>The locale controls defaults that vary from place to place.
The default locale is US-centric (like R), but you can use
<code>locale()</code> to create your own locale that controls things like
the default time zone, encoding, decimal mark, big mark, and day/month
names.</p></dd>
</dl></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe.</p>
    
    <h2 class="hasAnchor" id="acknowledgments"><a class="anchor" href="#acknowledgments"></a>Acknowledgments</h2>

    
    <p>Thanks to Shameema Jafferjee Esufali for motivating this functions.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='read_fgeo.html'>read_fgeo()</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>vft</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>fgeo.data</span><span class='kw ns'>::</span><span class='no'><a href='http://www.rdocumentation.org/packages/fgeo.data/topics/luquillo_vft_4quad'>luquillo_vft_4quad</a></span>

<span class='co'># Introdue problems to show how to fix them</span>
<span class='co'># Bad column types</span>
<span class='no'>vft</span>[] <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='no'>vft</span>, <span class='no'>as.character</span>)
<span class='co'># Bad representation of missing values</span>
<span class='no'>vft</span>$<span class='no'>PlotName</span> <span class='kw'>&lt;-</span> <span class='st'>"NULL"</span>

<span class='co'># "NULL" should be replaced by `NA` and `DBH` should be numeric</span>
<span class='fu'>str</span>(<span class='no'>vft</span>[<span class='fu'>c</span>(<span class='st'>"PlotName"</span>, <span class='st'>"DBH"</span>)])</div><div class='output co'>#&gt; Classes ‘tbl_df’, ‘tbl’ and 'data.frame':	3302 obs. of  2 variables:
#&gt;  $ PlotName: chr  "NULL" "NULL" "NULL" "NULL" ...
#&gt;  $ DBH     : chr  NA "185" NA "341" ...</div><div class='input'>
<span class='co'># Fix</span>
<span class='no'>vft_sane</span> <span class='kw'>&lt;-</span> <span class='fu'>sanitize_vft</span>(<span class='no'>vft</span>)
<span class='fu'>str</span>(<span class='no'>vft_sane</span>[<span class='fu'>c</span>(<span class='st'>"PlotName"</span>, <span class='st'>"DBH"</span>)])</div><div class='output co'>#&gt; Classes ‘tbl_df’, ‘tbl’ and 'data.frame':	3302 obs. of  2 variables:
#&gt;  $ PlotName: chr  NA NA NA NA ...
#&gt;  $ DBH     : num  NA 185 NA 341 370 375 167 172 187 141 ...</div><div class='input'>


<span class='no'>taxa</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>fgeo.data</span><span class='kw ns'>::</span><span class='no'><a href='http://www.rdocumentation.org/packages/fgeo.data/topics/luquillo_taxa'>luquillo_taxa</a></span>
<span class='co'># Bad column types</span>
<span class='no'>taxa</span>[] <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='no'>taxa</span>, <span class='no'>as.character</span>)
<span class='co'># Bad representation of missing values</span>
<span class='no'>taxa</span>$<span class='no'>SubspeciesID</span> <span class='kw'>&lt;-</span> <span class='st'>"NULL"</span>

<span class='co'># "NULL" should be replaced by `NA` and `ViewID` should be integer</span>
<span class='fu'>str</span>(<span class='no'>taxa</span>[<span class='fu'>c</span>(<span class='st'>"SubspeciesID"</span>, <span class='st'>"ViewID"</span>)])</div><div class='output co'>#&gt; Classes ‘tbl_df’, ‘tbl’ and 'data.frame':	163 obs. of  2 variables:
#&gt;  $ SubspeciesID: chr  "NULL" "NULL" "NULL" "NULL" ...
#&gt;  $ ViewID      : chr  "1" "2" "3" "4" ...</div><div class='input'>
<span class='co'># Fix</span>
<span class='no'>taxa_sane</span> <span class='kw'>&lt;-</span> <span class='fu'>sanitize_taxa</span>(<span class='no'>taxa</span>)
<span class='fu'>str</span>(<span class='no'>taxa_sane</span>[<span class='fu'>c</span>(<span class='st'>"SubspeciesID"</span>, <span class='st'>"ViewID"</span>)])</div><div class='output co'>#&gt; Classes ‘tbl_df’, ‘tbl’ and 'data.frame':	163 obs. of  2 variables:
#&gt;  $ SubspeciesID: chr  NA NA NA NA ...
#&gt;  $ ViewID      : int  1 2 3 4 5 6 7 8 9 10 ...</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#acknowledgments">Acknowledgments</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/maurolepore'>Mauro Lepore</a>, <a href='http://www.forestgeo.si.edu/'>CTFS-ForestGEO</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

